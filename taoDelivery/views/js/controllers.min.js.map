{"version":3,"file":"routes.js","sources":["routes.js","delivery/editDelivery.js","delivery/testtaker.js","../../lib/spin.min.js","runtime/deliveryExecution.js","runtime/index.js"],"names":["define","Delivery","actions","editDelivery","excludeTesttaker","$","helpers","start","click","delivery","this","data","load","_url","uri","prepend","modal","__","module","section","feedback","switchList","target","current","parent","attr","append","scrollIntoView","timeout","$search","$list","liveSearch","pattern","val","clearTimeout","setTimeout","filterList","RegExp","regex","list","children","each","index","element","text","match","hide","show","excluded","push","assemblyUri","ajax","url","type","JSON","stringify","dataType","success","response","saved","loadContentBlock","keyup","siblings","t","e","exports","amd","Spinner","o","i","document","createElement","n","arguments","length","appendChild","s","a","join","f","l","Math","max","u","substring","indexOf","toLowerCase","d","r","insertRule","cssRules","style","charAt","toUpperCase","slice","undefined","x","offsetLeft","y","offsetTop","offsetParent","c","opts","defaults","p","h","addRule","prototype","lines","coordsize","coordorigin","width","height","rotation","left","arcsize","corners","radius","top","filter","color","opacity","position","shadow","firstChild","childNodes","getElementsByTagName","sheet","styleSheet","rotate","direction","speed","trail","fps","zIndex","className","spin","stop","el","insertBefore","offsetWidth","parseInt","offsetHeight","setAttribute","m","g","v","parentNode","removeChild","background","boxShadow","transformOrigin","transform","borderRadius","hwaccel","animation","behavior","adj","iframeResizer","context","loading","reverse","appendTo","body","get","unloading","fadeOut","remove","resizeMainFrame","$frame","windowHeight","window","controlHeight","$control","outerHeight","newHeight","navigator","userAgent","css","options","on","location","root_url","serviceApi","onFinish","finishDeliveryExecution","deliveryExecution","destination","off","loadInto","bind","appConfig","getElementById","getAttribute","require","mouseover","addClass","mouseleave","removeClass"],"mappings":"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","sourcesContent":["/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n * \n * \n */\n\n//@see http://forge.taotesting.com/projects/tao/wiki/Front_js\ndefine('taoDelivery/controller/routes',[],function(){\n    'use strict';\n\n    return {\n        'Delivery': {\n            'actions' : {\n            \t'editDelivery'     : 'controller/delivery/editDelivery',\n\t            'excludeTesttaker' : 'controller/delivery/testtaker'\n            }\n        }\n    };\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2013 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n *\n *\n */\ndefine('taoDelivery/controller/delivery/editDelivery',['jquery', 'helpers', 'ui/modal'],\nfunction ($, helpers) {\n\t'use strict';\n\t\n\treturn {\n        start : function(){\n            $('#exclude-btn').click(function() {\n            \tvar delivery = $(this).data('delivery');\n        \t    $('#testtaker-form').load(helpers._url('excludeTesttaker', 'Delivery', 'taoDelivery', {'uri' : delivery}), function() {\n                    $('body').prepend($('#modal-container'));\n                    $('#testtaker-form').modal();\n                });\n        \t});\n        }\n\t}\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2013 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n *\n *\n */\ndefine('taoDelivery/controller/delivery/testtaker',['jquery', 'i18n', 'helpers', 'module', 'layout/section', 'ui/feedback'], \nfunction ($, __, helpers, module, section, feedback) {\n    'use strict';\n\n\tfunction switchList() {\n\t\tvar current = $(this).parent().attr('id');\n        var target; \n\t\tif (current == 'excludedList') {\n\t\t\ttarget = $('#assignedList'); \n\t\t} else if (current == 'assignedList') {\n\t\t\ttarget = $('#excludedList');\n\t\t}\n\t\tif (typeof target !== 'undefined') {\n\t\t\ttarget.append(this);\n\t\t\tthis.scrollIntoView();\n\t\t}\n\t}\n\t\n\tvar $search = $('#tt-filter');\n    var $list   = $('#assignedList');\n    var timeout;\n    \n    var liveSearch = function(){\n        var pattern = $search.val();\n        clearTimeout(timeout);\n        timeout = setTimeout(function(){\n        \tfilterList(new RegExp(pattern), $list);\n        }, 300);\n    };\n    \n    var filterList = function(regex, list) {\n    \tlist.children().each(function(index, element) {\n    \t\tif ($(element).text().match(regex) === null) {\n    \t\t\t$(element).hide();\n    \t\t} else {\n    \t\t\t$(element).show();\n    \t\t}\n    \t});\n    };\n\t\n    return {\n        start : function(){\n\t        $('#save-tt').click(function() {\n\t        \tvar excluded = [];\n\t        \t$('#excludedList > li').each(function(index) {\n\t        \t\texcluded.push($(this).data('uri'));\n\t        \t});\n\t        \tvar assemblyUri = $('input[name=\"assemblyUri\"]').val();\n\t        \t$.ajax({\n\t        \t\turl: helpers._url('saveExcluded', 'Delivery', 'taoDelivery'),\n\t\t\t\t\ttype: \"POST\",\n\t\t\t\t\tdata: {\n\t\t\t\t\t\turi: assemblyUri,\n\t\t\t\t\t\texcluded: JSON.stringify(excluded)\n\t\t\t\t\t},\n\t\t\t\t\tdataType: 'json',\n\t\t\t\t\tsuccess: function(response) {\n\t\t\t\t\t\tif (response.saved) {\n                            feedback().success(__('Selection saved successfully'));\n                            section.loadContentBlock(helpers._url('editDelivery', 'Delivery', 'taoDelivery'), {uri: assemblyUri});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t        });\n        \t$('#assignedList > li').click(switchList);\n        \t$('#excludedList > li').click(switchList);\n        \t\n        \t$('#close-tt').click(function() {\n        \t\t$('#testtaker-form').modal('close');\n        \t});\n                \n            //trigger the search on keyp and on the magnifer button click\n            $search.keyup(liveSearch).siblings('.ctrl').click(liveSearch);\n        \t\n        }\n    };\n});\n\n\n\n","(function(t,e){if(typeof exports==\"object\")module.exports=e();else if(typeof define==\"function\"&&define.amd)define('spin',e);else t.Spinner=e()})(this,function(){\"use strict\";var t=[\"webkit\",\"Moz\",\"ms\",\"O\"],e={},i;function o(t,e){var i=document.createElement(t||\"div\"),o;for(o in e)i[o]=e[o];return i}function n(t){for(var e=1,i=arguments.length;e<i;e++)t.appendChild(arguments[e]);return t}var r=function(){var t=o(\"style\",{type:\"text/css\"});n(document.getElementsByTagName(\"head\")[0],t);return t.sheet||t.styleSheet}();function s(t,o,n,s){var a=[\"opacity\",o,~~(t*100),n,s].join(\"-\"),f=.01+n/s*100,l=Math.max(1-(1-t)/o*(100-f),t),u=i.substring(0,i.indexOf(\"Animation\")).toLowerCase(),d=u&&\"-\"+u+\"-\"||\"\";if(!e[a]){r.insertRule(\"@\"+d+\"keyframes \"+a+\"{\"+\"0%{opacity:\"+l+\"}\"+f+\"%{opacity:\"+t+\"}\"+(f+.01)+\"%{opacity:1}\"+(f+o)%100+\"%{opacity:\"+t+\"}\"+\"100%{opacity:\"+l+\"}\"+\"}\",r.cssRules.length);e[a]=1}return a}function a(e,i){var o=e.style,n,r;i=i.charAt(0).toUpperCase()+i.slice(1);for(r=0;r<t.length;r++){n=t[r]+i;if(o[n]!==undefined)return n}if(o[i]!==undefined)return i}function f(t,e){for(var i in e)t.style[a(t,i)||i]=e[i];return t}function l(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var o in i)if(t[o]===undefined)t[o]=i[o]}return t}function u(t){var e={x:t.offsetLeft,y:t.offsetTop};while(t=t.offsetParent)e.x+=t.offsetLeft,e.y+=t.offsetTop;return e}function d(t,e){return typeof t==\"string\"?t:t[e%t.length]}var p={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:\"#000\",direction:1,speed:1,trail:100,opacity:1/4,fps:20,zIndex:2e9,className:\"spinner\",top:\"auto\",left:\"auto\",position:\"relative\"};function c(t){if(typeof this==\"undefined\")return new c(t);this.opts=l(t||{},c.defaults,p)}c.defaults={};l(c.prototype,{spin:function(t){this.stop();var e=this,n=e.opts,r=e.el=f(o(0,{className:n.className}),{position:n.position,width:0,zIndex:n.zIndex}),s=n.radius+n.length+n.width,a,l;if(t){t.insertBefore(r,t.firstChild||null);l=u(t);a=u(r);f(r,{left:(n.left==\"auto\"?l.x-a.x+(t.offsetWidth>>1):parseInt(n.left,10)+s)+\"px\",top:(n.top==\"auto\"?l.y-a.y+(t.offsetHeight>>1):parseInt(n.top,10)+s)+\"px\"})}r.setAttribute(\"role\",\"progressbar\");e.lines(r,e.opts);if(!i){var d=0,p=(n.lines-1)*(1-n.direction)/2,c,h=n.fps,m=h/n.speed,y=(1-n.opacity)/(m*n.trail/100),g=m/n.lines;(function v(){d++;for(var t=0;t<n.lines;t++){c=Math.max(1-(d+(n.lines-t)*g)%m*y,n.opacity);e.opacity(r,t*n.direction+p,c,n)}e.timeout=e.el&&setTimeout(v,~~(1e3/h))})()}return e},stop:function(){var t=this.el;if(t){clearTimeout(this.timeout);if(t.parentNode)t.parentNode.removeChild(t);this.el=undefined}return this},lines:function(t,e){var r=0,a=(e.lines-1)*(1-e.direction)/2,l;function u(t,i){return f(o(),{position:\"absolute\",width:e.length+e.width+\"px\",height:e.width+\"px\",background:t,boxShadow:i,transformOrigin:\"left\",transform:\"rotate(\"+~~(360/e.lines*r+e.rotate)+\"deg) translate(\"+e.radius+\"px\"+\",0)\",borderRadius:(e.corners*e.width>>1)+\"px\"})}for(;r<e.lines;r++){l=f(o(),{position:\"absolute\",top:1+~(e.width/2)+\"px\",transform:e.hwaccel?\"translate3d(0,0,0)\":\"\",opacity:e.opacity,animation:i&&s(e.opacity,e.trail,a+r*e.direction,e.lines)+\" \"+1/e.speed+\"s linear infinite\"});if(e.shadow)n(l,f(u(\"#000\",\"0 0 4px \"+\"#000\"),{top:2+\"px\"}));n(t,n(l,u(d(e.color,r),\"0 0 1px rgba(0,0,0,.1)\")))}return t},opacity:function(t,e,i){if(e<t.childNodes.length)t.childNodes[e].style.opacity=i}});function h(){function t(t,e){return o(\"<\"+t+' xmlns=\"urn:schemas-microsoft.com:vml\" class=\"spin-vml\">',e)}r.addRule(\".spin-vml\",\"behavior:url(#default#VML)\");c.prototype.lines=function(e,i){var o=i.length+i.width,r=2*o;function s(){return f(t(\"group\",{coordsize:r+\" \"+r,coordorigin:-o+\" \"+-o}),{width:r,height:r})}var a=-(i.width+i.length)*2+\"px\",l=f(s(),{position:\"absolute\",top:a,left:a}),u;function p(e,r,a){n(l,n(f(s(),{rotation:360/i.lines*e+\"deg\",left:~~r}),n(f(t(\"roundrect\",{arcsize:i.corners}),{width:o,height:i.width,left:i.radius,top:-i.width>>1,filter:a}),t(\"fill\",{color:d(i.color,e),opacity:i.opacity}),t(\"stroke\",{opacity:0}))))}if(i.shadow)for(u=1;u<=i.lines;u++)p(u,-2,\"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)\");for(u=1;u<=i.lines;u++)p(u);return n(e,l)};c.prototype.opacity=function(t,e,i,o){var n=t.firstChild;o=o.shadow&&o.lines||0;if(n&&e+o<n.childNodes.length){n=n.childNodes[e+o];n=n&&n.firstChild;n=n&&n.firstChild;if(n)n.opacity=i}}}var m=f(o(\"group\"),{behavior:\"url(#default#VML)\"});if(!a(m,\"transform\")&&m.adj)h();else i=a(m,\"animation\");return c});\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2013 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n *\n *\n */\ndefine('taoDelivery/controller/runtime/deliveryExecution',['jquery', 'iframeResizer', 'spin', 'context'], function($, iframeResizer, Spinner, context){\n    \n    function loading(reverse) {\n        if($('#overlay').length === 0){\n            \n            $('<div id=\"overlay\"></div>').appendTo(document.body);\n            $('<div id=\"loading\"><div></div></div>').appendTo(document.body);\n        }\n\n        var opts = {\n                lines: 11, // The number of lines to draw\n                length: 21, // The length of each line\n                width: 8, // The line thickness\n                radius: 36, // The radius of the inner circle\n                corners: 1, // Corner roundness (0..1)\n                rotate: 0, // The rotation offset\n                direction: (reverse === true) ? -1 : 1, // 1: clockwise, -1: counterclockwise\n                color: '#888', // #rgb or #rrggbb or array of colors\n                speed: 1.5, // Rounds per second\n                trail: 60, // Afterglow percentage\n                shadow: false, // Whether to render a shadow\n                hwaccel: false, // Whether to use hardware acceleration\n                className: 'spinner', // The CSS class to assign to the spinner\n                zIndex: 2e9, // The z-index (defaults to 2000000000)\n        };\n        new Spinner(opts).spin($('#loading > div').get(0));\n    }\n    \n    function unloading() {\n        setTimeout(function(){\n            $('#loading').fadeOut(300, function(){\n                $(this).remove();\n                $('#overlay').remove();\n            });\n        }, 300);\n    }\n    \n    function resizeMainFrame() {\n        var $frame = $('#iframeDeliveryExec');\n        var windowHeight = $(window).height();\n        var controlHeight = 0;\n        var $control = $('#control');\n        \n        if ($control.length === 1) {\n            controlHeight = $control.outerHeight(true);\n        }\n        \n        var newHeight = windowHeight - controlHeight;\n        \n        if (navigator.userAgent.match(/(iPad|iPhone|iPod)/g) ? true : false == true) {\n            newHeight -= 20;\n        }\n        \n        $frame.css('height', newHeight + 'px');\n    }\n    \n    return {\n        start: function(options){\n            \n            $(document).on('serviceforbidden', function() {\n                window.location = context.root_url + 'tao/Main/logout';\n            });\n\n            var $frame = $('#iframeDeliveryExec');\n            $('#tools').css('height', 'auto');\n            \n            var serviceApi = options.serviceApi;\n\n            serviceApi.onFinish(function() {\n                $.ajax({\n                    url : options.finishDeliveryExecution,\n                    data : {\n                        'deliveryExecution' : options.deliveryExecution\n                    },\n                    type : 'post',\n                    dataType : 'json',\n                    success : function(data) {\n                        window.location = data.destination;\n                    }\n                });\n            });\n            \n            $(document)\n                .on('loading', function(e, reverse){\n                    loading(reverse);\n                })\n                .on('unloading', function(){\n                    unloading();\n                })\n                .on('shutdown-com', function(){\n                    //use when we want to stop all exchange between frames\n                    $(document).off('heightchange');\n                    $frame.off('load.eventHeight')\n                           .off('load.cors');\n                });\n            \n            serviceApi.loadInto($frame.get(0));\n            \n            $(window).bind('resize', function() {\n                resizeMainFrame();\n            });\n            \n            resizeMainFrame();\n        }\n    };\n});\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2013 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n *\n *\n */\n(function(){\n    //the url of the app config is set into the data-config attr of the loader.\n    var appConfig = document.getElementById('amd-loader').getAttribute('data-config');\n    require([appConfig], function(){\n   \n        require(['jquery'], function($){\n            $('ul li').mouseover(function() {\n                $(\"a .actionsBox .button\", this).addClass(\"buttonSelected\");\n            });\n            $('ul li').mouseleave(function() {\n                $(\"a .actionsBox .button\", this).removeClass(\"buttonSelected\");\n            });\n        });\n    });\n\n}());\n\ndefine(\"taoDelivery/controller/runtime/index\", function(){});\n\n"]}
