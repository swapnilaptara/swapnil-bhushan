define("taoDelivery/controller/routes",[],function(){"use strict";return{Delivery:{actions:{editDelivery:"controller/delivery/editDelivery",excludeTesttaker:"controller/delivery/testtaker"}}}}),define("taoDelivery/controller/delivery/editDelivery",["jquery","helpers","ui/modal"],function($,helpers){"use strict";return{start:function(){$("#exclude-btn").click(function(){var delivery=$(this).data("delivery");$("#testtaker-form").load(helpers._url("excludeTesttaker","Delivery","taoDelivery",{uri:delivery}),function(){$("body").prepend($("#modal-container")),$("#testtaker-form").modal()})})}}}),define("taoDelivery/controller/delivery/testtaker",["jquery","i18n","helpers","module","layout/section","ui/feedback"],function($,__,helpers,module,section,feedback){"use strict";
function switchList(){var target,current=$(this).parent().attr("id");"excludedList"==current?target=$("#assignedList"):"assignedList"==current&&(target=$("#excludedList")),"undefined"!=typeof target&&(target.append(this),this.scrollIntoView())}var timeout,$search=$("#tt-filter"),$list=$("#assignedList"),liveSearch=function(){var pattern=$search.val();clearTimeout(timeout),timeout=setTimeout(function(){filterList(new RegExp(pattern),$list)},300)},filterList=function(regex,list){list.children().each(function(index,element){null===$(element).text().match(regex)?$(element).hide():$(element).show()})};return{start:function(){$("#save-tt").click(function(){var excluded=[];
$("#excludedList > li").each(function(){excluded.push($(this).data("uri"))});var assemblyUri=$('input[name="assemblyUri"]').val();$.ajax({url:helpers._url("saveExcluded","Delivery","taoDelivery"),type:"POST",data:{uri:assemblyUri,excluded:JSON.stringify(excluded)},dataType:"json",success:function(response){response.saved&&(feedback().success(__("Selection saved successfully")),section.loadContentBlock(helpers._url("editDelivery","Delivery","taoDelivery"),{uri:assemblyUri}))}})}),$("#assignedList > li").click(switchList),$("#excludedList > li").click(switchList),$("#close-tt").click(function(){$("#testtaker-form").modal("close")}),$search.keyup(liveSearch).siblings(".ctrl").click(liveSearch)
}}}),function(t,e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define("spin",e):t.Spinner=e()}(this,function(){"use strict";function o(t,e){var o,i=document.createElement(t||"div");for(o in e)i[o]=e[o];return i}function n(t){for(var e=1,i=arguments.length;i>e;e++)t.appendChild(arguments[e]);return t}function s(t,o,n,s){var a=["opacity",o,~~(100*t),n,s].join("-"),f=.01+n/s*100,l=Math.max(1-(1-t)/o*(100-f),t),u=i.substring(0,i.indexOf("Animation")).toLowerCase(),d=u&&"-"+u+"-"||"";return e[a]||(r.insertRule("@"+d+"keyframes "+a+"{0%{opacity:"+l+"}"+f+"%{opacity:"+t+"}"+(f+.01)+"%{opacity:1}"+(f+o)%100+"%{opacity:"+t+"}100%{opacity:"+l+"}}",r.cssRules.length),e[a]=1),a
}function a(e,i){var n,r,o=e.style;for(i=i.charAt(0).toUpperCase()+i.slice(1),r=0;r<t.length;r++)if(n=t[r]+i,void 0!==o[n])return n;return void 0!==o[i]?i:void 0}function f(t,e){for(var i in e)t.style[a(t,i)||i]=e[i];return t}function l(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var o in i)void 0===t[o]&&(t[o]=i[o])}return t}function u(t){for(var e={x:t.offsetLeft,y:t.offsetTop};t=t.offsetParent;)e.x+=t.offsetLeft,e.y+=t.offsetTop;return e}function d(t,e){return"string"==typeof t?t:t[e%t.length]}function c(t){return"undefined"==typeof this?new c(t):void(this.opts=l(t||{},c.defaults,p))}function h(){function t(t,e){return o("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',e)
}r.addRule(".spin-vml","behavior:url(#default#VML)"),c.prototype.lines=function(e,i){function s(){return f(t("group",{coordsize:r+" "+r,coordorigin:-o+" "+-o}),{width:r,height:r})}function p(e,r,a){n(l,n(f(s(),{rotation:360/i.lines*e+"deg",left:~~r}),n(f(t("roundrect",{arcsize:i.corners}),{width:o,height:i.width,left:i.radius,top:-i.width>>1,filter:a}),t("fill",{color:d(i.color,e),opacity:i.opacity}),t("stroke",{opacity:0}))))}var u,o=i.length+i.width,r=2*o,a=2*-(i.width+i.length)+"px",l=f(s(),{position:"absolute",top:a,left:a});if(i.shadow)for(u=1;u<=i.lines;u++)p(u,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(u=1;u<=i.lines;u++)p(u);
return n(e,l)},c.prototype.opacity=function(t,e,i,o){var n=t.firstChild;o=o.shadow&&o.lines||0,n&&e+o<n.childNodes.length&&(n=n.childNodes[e+o],n=n&&n.firstChild,n=n&&n.firstChild,n&&(n.opacity=i))}}var i,t=["webkit","Moz","ms","O"],e={},r=function(){var t=o("style",{type:"text/css"});return n(document.getElementsByTagName("head")[0],t),t.sheet||t.styleSheet}(),p={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};c.defaults={},l(c.prototype,{spin:function(t){this.stop();var a,l,e=this,n=e.opts,r=e.el=f(o(0,{className:n.className}),{position:n.position,width:0,zIndex:n.zIndex}),s=n.radius+n.length+n.width;
if(t&&(t.insertBefore(r,t.firstChild||null),l=u(t),a=u(r),f(r,{left:("auto"==n.left?l.x-a.x+(t.offsetWidth>>1):parseInt(n.left,10)+s)+"px",top:("auto"==n.top?l.y-a.y+(t.offsetHeight>>1):parseInt(n.top,10)+s)+"px"})),r.setAttribute("role","progressbar"),e.lines(r,e.opts),!i){var c,d=0,p=(n.lines-1)*(1-n.direction)/2,h=n.fps,m=h/n.speed,y=(1-n.opacity)/(m*n.trail/100),g=m/n.lines;!function v(){d++;for(var t=0;t<n.lines;t++)c=Math.max(1-(d+(n.lines-t)*g)%m*y,n.opacity),e.opacity(r,t*n.direction+p,c,n);e.timeout=e.el&&setTimeout(v,~~(1e3/h))}()}return e},stop:function(){var t=this.el;return t&&(clearTimeout(this.timeout),t.parentNode&&t.parentNode.removeChild(t),this.el=void 0),this
},lines:function(t,e){function u(t,i){return f(o(),{position:"absolute",width:e.length+e.width+"px",height:e.width+"px",background:t,boxShadow:i,transformOrigin:"left",transform:"rotate("+~~(360/e.lines*r+e.rotate)+"deg) translate("+e.radius+"px,0)",borderRadius:(e.corners*e.width>>1)+"px"})}for(var l,r=0,a=(e.lines-1)*(1-e.direction)/2;r<e.lines;r++)l=f(o(),{position:"absolute",top:1+~(e.width/2)+"px",transform:e.hwaccel?"translate3d(0,0,0)":"",opacity:e.opacity,animation:i&&s(e.opacity,e.trail,a+r*e.direction,e.lines)+" "+1/e.speed+"s linear infinite"}),e.shadow&&n(l,f(u("#000","0 0 4px #000"),{top:"2px"})),n(t,n(l,u(d(e.color,r),"0 0 1px rgba(0,0,0,.1)")));
return t},opacity:function(t,e,i){e<t.childNodes.length&&(t.childNodes[e].style.opacity=i)}});var m=f(o("group"),{behavior:"url(#default#VML)"});return!a(m,"transform")&&m.adj?h():i=a(m,"animation"),c}),define("taoDelivery/controller/runtime/deliveryExecution",["jquery","iframeResizer","spin","context"],function($,iframeResizer,Spinner,context){function loading(reverse){0===$("#overlay").length&&($('<div id="overlay"></div>').appendTo(document.body),$('<div id="loading"><div></div></div>').appendTo(document.body));var opts={lines:11,length:21,width:8,radius:36,corners:1,rotate:0,direction:reverse===!0?-1:1,color:"#888",speed:1.5,trail:60,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9};
new Spinner(opts).spin($("#loading > div").get(0))}function unloading(){setTimeout(function(){$("#loading").fadeOut(300,function(){$(this).remove(),$("#overlay").remove()})},300)}function resizeMainFrame(){var $frame=$("#iframeDeliveryExec"),windowHeight=$(window).height(),controlHeight=0,$control=$("#control");1===$control.length&&(controlHeight=$control.outerHeight(!0));var newHeight=windowHeight-controlHeight;(navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?0:1)||(newHeight-=20),$frame.css("height",newHeight+"px")}return{start:function(options){$(document).on("serviceforbidden",function(){window.location=context.root_url+"tao/Main/logout"});var $frame=$("#iframeDeliveryExec");
$("#tools").css("height","auto");var serviceApi=options.serviceApi;serviceApi.onFinish(function(){$.ajax({url:options.finishDeliveryExecution,data:{deliveryExecution:options.deliveryExecution},type:"post",dataType:"json",success:function(data){window.location=data.destination}})}),$(document).on("loading",function(e,reverse){loading(reverse)}).on("unloading",function(){unloading()}).on("shutdown-com",function(){$(document).off("heightchange"),$frame.off("load.eventHeight").off("load.cors")}),serviceApi.loadInto($frame.get(0)),$(window).bind("resize",function(){resizeMainFrame()}),resizeMainFrame()}}}),function(){var appConfig=document.getElementById("amd-loader").getAttribute("data-config");
require([appConfig],function(){require(["jquery"],function($){$("ul li").mouseover(function(){$("a .actionsBox .button",this).addClass("buttonSelected")}),$("ul li").mouseleave(function(){$("a .actionsBox .button",this).removeClass("buttonSelected")})})})}(),define("taoDelivery/controller/runtime/index",function(){});
//# sourceMappingURL=routes.js
//# sourceMappingURL=routes.js.map